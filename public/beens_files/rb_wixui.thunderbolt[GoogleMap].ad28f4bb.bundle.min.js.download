!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[GoogleMap]",["react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[GoogleMap]"]=t(require("react")):e["rb_wixui.thunderbolt[GoogleMap]"]=t(e.React)}("undefined"!=typeof self?self:this,(function(e){return function(){var t={5329:function(t){"use strict";t.exports=e},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/";var o={};return function(){"use strict";r.r(o),r.d(o,{components:function(){return K}});var e=r(448),t=r.n(e),n=r(5329);function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var s=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r};const i=()=>"undefined"!=typeof window,l=e=>Object.entries(e).reduce(((e,[t,n])=>(t.includes("data-")&&(e[t]=n),e)),{});const u=(...e)=>e.map((e=>e?`wixui-${e}`:"")).join(" ");var c={root:"google-map"};const d=e=>e.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)),p=(((e,t,n=[])=>{e.reduce(((e,t)=>({...e,[t]:!0})),{}),n.length})(["experiments"],(e=>{let{experiments:t}=e;return t["specs.thunderbolt.shouldExportCurrentConsentPolicy"]?"WithConsentWrapper":void 0})),e=>({consentPolicy:e.currentConsentPolicy,openSettingModal:e.openSettingModal}));function f(){const e=n.useRef([]);return[n.useCallback((()=>new Promise((t=>e.current.push(t)))),[]),n.useCallback((t=>{e.current.forEach((e=>e(t))),e.current.length=0}),[])]}const g=(e,t)=>{if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:(e=>{if(e&&e.endsWith(".webp"))try{const t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e})(e)},m=e=>e.map((e=>({...e,icon:g(e.pinIcon,e.pinColor)})));var v="load",y="message",h="SET_INITIAL_LOCATIONS",M="SET_CENTER",E="CENTER_UPDATED",S="SET_ZOOM",b="ZOOM_UPDATED",w="MARKER_CLICKED",C="MAP_CLICKED",O="GET_MARKERS",_="MARKERS",N="FIT_BOUNDS",k="MAP_IDLE",x="OPEN_INFO_WINDOW",I="TILES_LOADED",R="SET_MARKER_ICON",D="SET_MARKER_ICON_FINISHED",L="SET_DIRECTION";const P=["iw","ar","ur","fa"];function j(e,t,r){let{mapData:o,language:a,isEditorMode:s}=t,{onUpdateZoom:l,onUpdateCenter:u,onMarkerClicked:c,onMapClicked:d}=r;const p=(0,n.useRef)([]),g=(0,n.useRef)(null),[j,A]=f(),[T,U]=f(),[W,G]=f(),[J,F]=f(),[K,Z]=f(),[z,V]=f(),[B,H]=f(),[$,q]=(0,n.useState)(!1),Q=e=>{const t=g.current;return m(t||e)},X=(0,n.useMemo)((()=>({...o,locations:Q(o.locations)})),[o]),Y=function(e,t){void 0===t&&(t=null);const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}(X),ee={[E]:e=>null==u?void 0:u(e),[b]:e=>null==l?void 0:l({zoom:e}),[w]:e=>null==c?void 0:c({type:"markerClicked",...e}),[C]:e=>{let{longitude:t,latitude:n,...r}=e;return null==d?void 0:d({type:"mapClicked",location:{longitude:t,latitude:n},...r})},[_]:e=>A(e),[k]:()=>{const e=p.current.shift();null==e||e()},[I]:()=>{$||q(!0)},[D]:()=>H()},te={[v]:e=>{let{_sendMessage:t}=e;t({type:h,data:JSON.stringify({...o,locations:Q(o.locations)})},{forceSend:!0}),t({type:L,data:JSON.stringify({direction:P.includes(a)?"rtl":"ltr"})})},[y]:e=>{let{event:t}=e;if("string"==typeof t.payload){var n;const{type:e,data:r}=JSON.parse(t.payload);null==(n=ee[e])||n.call(ee,r)}}},[ne,re]=function(e){let{reducer:t=(()=>({})),iframeLoaded:r}=e;const o=(0,n.useRef)([]),a=(0,n.useRef)(void 0),s=(0,n.useRef)(void 0),l=(0,n.useRef)(void 0),u=(0,n.useCallback)(((e,t)=>{if(a.current&&r||null!=t&&t.forceSend){var n;const t=null==(n=a.current)?void 0:n.contentWindow;return void(null==t||t.postMessage(e,"*"))}if(!a.current||!s.current||!1===r)return void o.current.push(e);const i=a.current.contentWindow;null==i||i.postMessage(e,"*")}),[r]),c=(0,n.useCallback)((()=>{0!==o.current.length&&!1!==r&&(o.current.forEach((e=>u(e))),o.current=[])}),[u,r]),d=(0,n.useCallback)((e=>{if(l.current&&(l.current(),l.current=void 0),!e)return;const n=()=>{s.current=!0,c(),t({type:"load"},u)};e.addEventListener("load",n),a.current=e,l.current=()=>{e.removeEventListener("load",n)}}),[t,u,c]);return(0,n.useEffect)((()=>{r&&c()}),[r,c]),(0,n.useEffect)((()=>{if(!i())return;const e=e=>{var n;e.source&&e.source!==(null==(n=a.current)?void 0:n.contentWindow)||t({type:"message",payload:e.data},u)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[t,u]),[d,u]}({reducer:(e,t)=>{var n;return null==(n=te[e.type])?void 0:n.call(te,{event:e,_sendMessage:t})},iframeLoaded:$});return(0,n.useImperativeHandle)(e,(()=>({setMapCenter:(e,t)=>{const n=T();return re({type:M,data:JSON.stringify({longitude:e,latitude:t})}),p.current.push(U),n},fitBounds:e=>{let{north:t,east:n,west:r,south:o}=e;const a=J();return re({type:N,data:JSON.stringify({north:t,east:n,west:r,south:o})}),p.current.push(F),a},setMarkerIcon:e=>{let{locations:t,coordinates:n,iconOptions:r}=e;const o=B();return g.current=t,re({type:R,data:JSON.stringify({...n,iconOptions:r})}),o},setMapZoom:e=>{const t=W();return re({type:S,data:e}),p.current.push(G),t},getVisibleMarkers:()=>{const e=j();return re({type:O}),e},openInfoWindow:e=>{if(!X.showDirectionsLink){const t=z();return re({type:x,data:JSON.stringify({locationIndex:e})}),p.current.push(V),t}return new Promise((e=>e()))},setMarkers:(e,t)=>{const n=K();return g.current=e,re(JSON.stringify({...X,locations:m(e),openInfoWindow:null==t?void 0:t.openInfoWindow})),p.current.push(Z),n}}))),(0,n.useEffect)((()=>{if(!$||!s)return;const e=!!Y&&(t=X.locations,n=Y.locations,t.length===n.length&&t.every(((e,t)=>{const r=Object.keys(e);return r.length===Object.keys(n[t]).length&&r.every((r=>"locationLinkAttributes"===r||e[r]===n[t][r]))})));var t,n;re(JSON.stringify({...X,locations:Q(X.locations),shouldKeepMarkers:e}))}),[X,re,$,Y,s]),[ne]}var A={GoogleMapSkin:"azCDHJ",googleMapSkin:"azCDHJ",mapContainer:"UXiAup",GoogleMapDefault:"gzNVjA",googleMapDefault:"gzNVjA",GoogleMapSloppy:"FiDpOP",googleMapSloppy:"FiDpOP",brd:"vWE6wc",one:"dj3FJn",two:"W_nooy",GoogleMapLiftedShadow:"e4y5ni",googleMapLiftedShadow:"e4y5ni",shd:"up3Bvs",left:"h0JKNn",right:"uaUROu"};const T={GoogleMapLiftedShadow:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(A.left,A.shd)}),n.createElement("div",{className:s(A.right,A.shd)})),GoogleMapSloppy:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s(A.brd,A.one)}),n.createElement("div",{className:s(A.brd,A.two)})),GoogleMapSkin:()=>n.createElement(n.Fragment,null),GoogleMapDefault:()=>n.createElement(n.Fragment,null)};var U=r.p+"media/googleMap.ea5928de.html",W=r.p+"media/google-map.min.c5cac041.js";const G=e=>e.replace("https://static.parastorage.com/services/","https://editor.wix.com/_partials/"),J=(e,r)=>{const{id:o,className:a,customClassNames:d=[],skin:p,urlQueries:f,mapData:g,translations:m,isConsentPolicyActive:v,onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E,onMouseEnter:S,onMouseLeave:b,isDesignerMode:w,isEditorMode:C,language:O}=e,_=T[p],N=((e,t)=>{const n=t?G(W):W,r=new URLSearchParams({googleMapsScriptPath:new URL(n).pathname});return i()&&r.append("origin",window.origin),(t?G(U):U)+"?"+e+"&"+r})(f,w),[k,x]=n.useState(!1),[I]=j(r,{mapData:g,isEditorMode:C,language:O},{onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E});n.useEffect((()=>{x(!0)}),[N]);const R=m.title,D=((e,t)=>e?{}:t)(v,{id:o,className:s(A[p],A.wixIframe,a,u(c.root,...d)),...l(e)});return n.createElement("div",t()({},D,{tabIndex:0}),k&&n.createElement("wix-iframe",{title:R,"aria-label":R,"data-src":N},n.createElement(_,null),n.createElement("div",{id:"mapContainer_"+o,onMouseEnter:S,onMouseLeave:b,className:A.mapContainer},n.createElement("iframe",{ref:I,title:R,"aria-label":R,"data-src":N,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))))};var F;const K={GoogleMap:{component:n.forwardRef(J),controller:(F=e=>{let{stateValues:t,mapperProps:n}=e;return{...n,...p(t)}},{useComponentProps:(e,t,n)=>{const r=(e=>({...e,updateStyles:t=>{const n=Object.entries(t).reduce(((e,[t,n])=>{return{...e,[(r=t,r.startsWith("--")?t:d(t))]:void 0===n?null:n};var r}),{});e.updateStyles(n)}}))(n);return F({mapperProps:e,stateValues:t,controllerUtils:r})}})}}}(),o}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[GoogleMap].ad28f4bb.bundle.min.js.map